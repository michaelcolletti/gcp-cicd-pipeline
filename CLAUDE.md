# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Build Commands
- No package.json in root - this is a shell script-based GCP CI/CD pipeline
- HelloWorldNodeJs example app: `cd HelloWorldNodeJs && npm install && npm start`
- GitHub Actions workflow exists but may need updating for actual project structure

## Pipeline Execution Flow
The GCP CI/CD pipeline follows this sequence:
1. `./enable-apis.sh` - Enable required GCP services
2. `./cloudbuild.sh` - Generate cloudbuild.yaml for Docker build and push
3. `./clouddeploy.sh` - Generate clouddeploy.yaml defining deployment pipeline (dev → staging → prod)
4. `./skaffold.sh` - Generate skaffold.yaml for Kubernetes deployment
5. `./create-manifest.sh` - Generate kubernetes-app.yaml with deployment and service configs
6. `./deploy.sh` - Apply the Cloud Deploy pipeline

## Architecture Overview
This is a Google Cloud Platform CI/CD demonstration project with:
- **Cloud Build Integration**: Automated Docker image building and pushing to Artifact Registry
- **Cloud Deploy Pipeline**: Three-stage deployment (dev, staging, prod) with approval gates
- **Kubernetes Deployment**: GKE clusters for each environment
- **Skaffold Configuration**: Declarative deployment management
- **Sample Application**: Node.js Hello World app in HelloWorldNodeJs/ directory

## GCP Configuration
- Uses environment variables: `$PROJECT_ID` and `$ZONE` (us-east1-a default)
- Requires GCP services: serviceusage, container, cloudbuild, sourcerepo, artifactregistry, clouddeploy, cloudresourcemanager
- Container Registry: `gcr.io/$PROJECT_ID/helloworld`
- Deployment region: us-central1
- Cluster zones: us-central1-b

## Important Notes
- All YAML files are generated by shell scripts - edit the .sh files, not the YAML directly
- Production deployments require manual approval (requireApproval: true)
- Sample app runs on port 8080, exposed via LoadBalancer on port 80
- Load testing setup available in HelloWorldNodeJs/loadgenerator/